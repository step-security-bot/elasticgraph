<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ElasticGraph::SchemaDefinition::Indexing::Field
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "ElasticGraph::SchemaDefinition::Indexing::Field";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../ElasticGraph.html" title="ElasticGraph (module)">ElasticGraph</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../SchemaDefinition.html" title="ElasticGraph::SchemaDefinition (module)">SchemaDefinition</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Indexing.html" title="ElasticGraph::SchemaDefinition::Indexing (module)">Indexing</a></span></span>
     &raquo; 
    <span class="title">Field</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ElasticGraph::SchemaDefinition::Indexing::Field
  
  
  <span class="private note title">Private</span>
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ElasticGraph::SchemaDefinition::Indexing::Field</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>elasticgraph-schema_definition/lib/elastic_graph/schema_definition/indexing/field.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This class is part of a private API.</strong>
  You should avoid using this class if possible, as it may be removed or be changed in the future.
</p>
<p>Represents a field in a JSON document during indexing.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="JSON_SCHEMA_OVERRIDES_BY_MAPPING_TYPE-constant" class="">JSON_SCHEMA_OVERRIDES_BY_MAPPING_TYPE =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  You should avoid using this constant if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>We don’t handle <code>integer</code> here because it’s the default numeric type (handled by our definition of the <code>Int</code> scalar type).</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Likewise, we don’t handle <code>long</code> here because a custom scalar type must be used for that since GraphQL’s <code>Int</code> type can’t handle long values.</p>
</div>
  </div>

<p>JSON schema overrides that automatically apply to specific mapping types so that the JSON schema
validation will reject values which cannot be indexed into fields of a specific mapping type.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/number.html" target="_parent" title="Elasticsearch numeric field type documentation">Elasticsearch numeric field type documentation</a></li>
    
  </ul>

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>byte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>minimum</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='lparen'>(</span><span class='int'>2</span><span class='op'>**</span><span class='int'>7</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>maximum</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='int'>2</span><span class='op'>**</span><span class='int'>7</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>short</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>minimum</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='lparen'>(</span><span class='int'>2</span><span class='op'>**</span><span class='int'>15</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>maximum</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='int'>2</span><span class='op'>**</span><span class='int'>15</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>keyword</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>maxLength</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='const'>DEFAULT_MAX_KEYWORD_LENGTH</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>maxLength</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='const'>DEFAULT_MAX_TEXT_LENGTH</span><span class='rbrace'>}</span>
<span class='rbrace'>}</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalized_mapping_hash_for-class_method" title="normalized_mapping_hash_for (class method)">.<strong>normalized_mapping_hash_for</strong>(fields)  &#x21d2; Hash&lt;String, Object&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Builds a hash containing the mapping for the provided fields, normalizing it in the same way that the datastore does so that consistency checks between our index configuration and what’s in the datastore work properly.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#json_schema-instance_method" title="#json_schema (instance method)">#<strong>json_schema</strong>  &#x21d2; Hash&lt;String, Object&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The JSON schema definition for this field.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#json_schema_metadata-instance_method" title="#json_schema_metadata (instance method)">#<strong>json_schema_metadata</strong>  &#x21d2; JSONSchemaFieldMetadata </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Additional ElasticGraph metadata to be stored in the JSON schema for this field.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mapping-instance_method" title="#mapping (instance method)">#<strong>mapping</strong>  &#x21d2; Hash&lt;String, Object&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The mapping for this field.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="normalized_mapping_hash_for-class_method">
  
    .<strong>normalized_mapping_hash_for</strong>(fields)  &#x21d2; <tt>Hash&lt;String, Object&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Builds a hash containing the mapping for the provided fields, normalizing it in the same way that the
datastore does so that consistency checks between our index configuration and what’s in the datastore
work properly.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>fields</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="ElasticGraph::SchemaDefinition::Indexing::Field (class)">Field</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>fields to generate a mapping hash from</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;String, Object&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>generated mapping hash</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'elasticgraph-schema_definition/lib/elastic_graph/schema_definition/indexing/field.rb', line 87</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_normalized_mapping_hash_for'>normalized_mapping_hash_for</span><span class='lparen'>(</span><span class='id identifier rubyid_fields'>fields</span><span class='rparen'>)</span>
  <span class='comment'># When an object field has `properties`, the datastore normalizes the mapping by dropping
</span>  <span class='comment'># the `type =&gt; object` (it&#39;s implicit, as `properties` are only valid on an object...).
</span>  <span class='comment'># OTOH, when there are no properties, the datastore normalizes the mapping by dropping the
</span>  <span class='comment'># empty `properties` entry and instead returning `type =&gt; object`.
</span>  <span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>object</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_fields'>fields</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='comment'># Partition the fields into runtime fields and normal fields based on the presence of runtime_script
</span>  <span class='id identifier rubyid_runtime_fields'>runtime_fields</span><span class='comma'>,</span> <span class='id identifier rubyid_normal_fields'>normal_fields</span> <span class='op'>=</span> <span class='id identifier rubyid_fields'>fields</span><span class='period'>.</span><span class='id identifier rubyid_partition'>partition</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:runtime_field_script</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_mapping_hash'>mapping_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>properties</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_normal_fields'>normal_fields</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_name_in_index'>name_in_index</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_mapping'>mapping</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_runtime_fields'>runtime_fields</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_mapping_hash'>mapping_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>runtime</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_runtime_fields'>runtime_fields</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
      <span class='lbracket'>[</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_name_in_index'>name_in_index</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_mapping'>mapping</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>script</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_runtime_field_script'>runtime_field_script</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_mapping_hash'>mapping_hash</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="json_schema-instance_method">
  
    #<strong>json_schema</strong>  &#x21d2; <tt>Hash&lt;String, Object&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns the JSON schema definition for this field. The returned object should
be composed entirely of Ruby primitives that, when converted to a JSON string, match the
requirements of <a href="https://json-schema.org/">the JSON schema spec</a>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;String, Object&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the JSON schema definition for this field. The returned object should
be composed entirely of Ruby primitives that, when converted to a JSON string, match the
requirements of <a href="https://json-schema.org/">the JSON schema spec</a>.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'elasticgraph-schema_definition/lib/elastic_graph/schema_definition/indexing/field.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_json_schema'>json_schema</span>
  <span class='id identifier rubyid_json_schema_layers'>json_schema_layers</span>
    <span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span> <span class='comment'># resolve layers from innermost to outermost wrappings
</span>    <span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lparen'>(</span><span class='id identifier rubyid_inner_json_schema'>inner_json_schema</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_acc'>acc</span><span class='comma'>,</span> <span class='id identifier rubyid_layer'>layer</span><span class='op'>|</span> <span class='id identifier rubyid_process_layer'>process_layer</span><span class='lparen'>(</span><span class='id identifier rubyid_layer'>layer</span><span class='comma'>,</span> <span class='id identifier rubyid_acc'>acc</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_outer_json_schema_customizations'>outer_json_schema_customizations</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_then'>then</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="../../Support.html" title="ElasticGraph::Support (module)">Support</a></span></span><span class='op'>::</span><span class='const'>HashUtil</span><span class='period'>.</span><span class='id identifier rubyid_stringify_keys'>stringify_keys</span><span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="json_schema_metadata-instance_method">
  
    #<strong>json_schema_metadata</strong>  &#x21d2; <tt><span class='object_link'><a href="JSONSchemaFieldMetadata.html" title="ElasticGraph::SchemaDefinition::Indexing::JSONSchemaFieldMetadata (class)">JSONSchemaFieldMetadata</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns additional ElasticGraph metadata to be stored in the JSON schema for this field.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="JSONSchemaFieldMetadata.html" title="ElasticGraph::SchemaDefinition::Indexing::JSONSchemaFieldMetadata (class)">JSONSchemaFieldMetadata</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>additional ElasticGraph metadata to be stored in the JSON schema for this field.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'elasticgraph-schema_definition/lib/elastic_graph/schema_definition/indexing/field.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_json_schema_metadata'>json_schema_metadata</span>
  <span class='const'><span class='object_link'><a href="JSONSchemaFieldMetadata.html" title="ElasticGraph::SchemaDefinition::Indexing::JSONSchemaFieldMetadata (class)">JSONSchemaFieldMetadata</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>type:</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>name_in_index:</span> <span class='id identifier rubyid_name_in_index'>name_in_index</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mapping-instance_method">
  
    #<strong>mapping</strong>  &#x21d2; <tt>Hash&lt;String, Object&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns the mapping for this field. The returned hash should be composed entirely
of Ruby primitives that, when converted to a JSON string, match the structure required by
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html">Elasticsearch</a>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;String, Object&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the mapping for this field. The returned hash should be composed entirely
of Ruby primitives that, when converted to a JSON string, match the structure required by
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html">Elasticsearch</a>.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'elasticgraph-schema_definition/lib/elastic_graph/schema_definition/indexing/field.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mapping'>mapping</span>
  <span class='ivar'>@mapping</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_raw_mapping'>raw_mapping</span> <span class='op'>=</span> <span class='id identifier rubyid_indexing_field_type'>indexing_field_type</span>
      <span class='period'>.</span><span class='id identifier rubyid_to_mapping'>to_mapping</span>
      <span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Support.html" title="ElasticGraph::Support (module)">Support</a></span></span><span class='op'>::</span><span class='const'>HashUtil</span><span class='period'>.</span><span class='id identifier rubyid_stringify_keys'>stringify_keys</span><span class='lparen'>(</span><span class='id identifier rubyid_mapping_customizations'>mapping_customizations</span><span class='rparen'>)</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_object_type'>object_type</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_fully_unwrapped'>fully_unwrapped</span><span class='period'>.</span><span class='id identifier rubyid_as_object_type'>as_object_type</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_list?'>list?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_mapping_customizations'>mapping_customizations</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nested</span><span class='tstring_end'>&quot;</span></span>
      <span class='comment'># If it&#39;s an object list field using the `nested` type, we need to add a `__counts` field to
</span>      <span class='comment'># the mapping for all of its subfields which are lists.
</span>      <span class='const'>ListCountsMapping</span><span class='period'>.</span><span class='id identifier rubyid_merged_into'>merged_into</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_mapping'>raw_mapping</span><span class='comma'>,</span> <span class='label'>for_type:</span> <span class='id identifier rubyid_object_type'>object_type</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raw_mapping'>raw_mapping</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Oct 25 01:19:02 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.3.5).
</div>

    </div>
  </body>
</html>