<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: ElasticGraph::Apollo::SchemaDefinition::APIExtension
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "ElasticGraph::Apollo::SchemaDefinition::APIExtension";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../ElasticGraph.html" title="ElasticGraph (module)">ElasticGraph</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Apollo.html" title="ElasticGraph::Apollo (module)">Apollo</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../SchemaDefinition.html" title="ElasticGraph::Apollo::SchemaDefinition (module)">SchemaDefinition</a></span></span>
     &raquo; 
    <span class="title">APIExtension</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: ElasticGraph::Apollo::SchemaDefinition::APIExtension
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>elasticgraph-apollo/lib/elastic_graph/apollo/schema_definition/api_extension.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Module designed to be extended onto an <span class='object_link'><a href="../../SchemaDefinition/API.html" title="ElasticGraph::SchemaDefinition::API (class)">SchemaDefinition::API</a></span> instance
to customize the schema artifacts based on the <a href="https://www.apollographql.com/docs/federation/subgraph-spec/">Apollo Federation subgraph
spec</a>.</p>

<p>To use this module, pass it in <code>schema_definition_extension_modules</code> when defining your <span class='object_link'><a href="../../Local/RakeTasks.html" title="ElasticGraph::Local::RakeTasks (class)">Local::RakeTasks</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Define local rake tasks with this extension module</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>elastic_graph/apollo/schema_definition/api_extension</span><span class='tstring_end'>&quot;</span></span>

<span class='const'><span class='object_link'><a href="../../../ElasticGraph.html" title="ElasticGraph (module)">ElasticGraph</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Local.html" title="ElasticGraph::Local (module)">Local</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Local/RakeTasks.html" title="ElasticGraph::Local::RakeTasks (class)">RakeTasks</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../Local/RakeTasks.html#initialize-instance_method" title="ElasticGraph::Local::RakeTasks#initialize (method)">new</a></span></span><span class='lparen'>(</span>
  <span class='label'>local_config_yaml:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>config/settings/local.yaml</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>path_to_schema:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>config/schema.rb</span><span class='tstring_end'>&quot;</span></span>
<span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tasks'>tasks</span><span class='op'>|</span>
  <span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_schema_definition_extension_modules'>schema_definition_extension_modules</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../ElasticGraph.html" title="ElasticGraph (module)">ElasticGraph</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apollo.html" title="ElasticGraph::Apollo (module)">Apollo</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../SchemaDefinition.html" title="ElasticGraph::Apollo::SchemaDefinition (module)">SchemaDefinition</a></span></span><span class='op'>::</span><span class='const'>APIExtension</span><span class='rbracket'>]</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tag_built_in_types_with-instance_method" title="#tag_built_in_types_with (instance method)">#<strong>tag_built_in_types_with</strong>(name, except: [])  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Applies an apollo tag to built-in types so that they are included in the Apollo contract schema.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#target_apollo_federation_version-instance_method" title="#target_apollo_federation_version (instance method)">#<strong>target_apollo_federation_version</strong>(version)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Picks which version of Apollo federation to target.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="tag_built_in_types_with-instance_method">
  
    #<strong>tag_built_in_types_with</strong>(name, except: [])  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Applies an apollo tag to built-in types so that they are included in the Apollo contract schema.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Tag all built-in types (except two) for inclusion in the <code>public</code> schema</p>
</div></h5>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../../ElasticGraph.html" title="ElasticGraph (module)">ElasticGraph</a></span></span><span class='period'>.</span><span class='id identifier rubyid_define_schema'><span class='object_link'><a href="../../../ElasticGraph.html#define_schema-class_method" title="ElasticGraph.define_schema (method)">define_schema</a></span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_schema'>schema</span><span class='op'>|</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_tag_built_in_types_with'>tag_built_in_types_with</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>public</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>except:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IntAggregatedValue</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FloatAggregatedValues</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>tag name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>except</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>built-in types not to tag</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="ApolloDirectives/Tag.html" title="ElasticGraph::Apollo::SchemaDefinition::ApolloDirectives::Tag (module)">ElasticGraph::Apollo::SchemaDefinition::ApolloDirectives::Tag</a></span></li>
    
      <li><span class='object_link'><a href="FieldExtension.html#tag_with-instance_method" title="ElasticGraph::Apollo::SchemaDefinition::FieldExtension#tag_with (method)">FieldExtension#tag_with</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84
85
86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'elasticgraph-apollo/lib/elastic_graph/apollo/schema_definition/api_extension.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tag_built_in_types_with'>tag_built_in_types_with</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_except_set'>except_set</span> <span class='op'>=</span> <span class='id identifier rubyid_except'>except</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>
  <span class='id identifier rubyid_on_built_in_types'>on_built_in_types</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type'>type</span><span class='op'>|</span>
    <span class='id identifier rubyid_apollo_type'>apollo_type</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid__'>_</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span> <span class='comment'># : ApolloDirectives::Tag
</span>    <span class='id identifier rubyid_apollo_type'>apollo_type</span><span class='period'>.</span><span class='id identifier rubyid_apollo_tag'>apollo_tag</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_except_set'>except_set</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="target_apollo_federation_version-instance_method">
  
    #<strong>target_apollo_federation_version</strong>(version)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Picks which version of Apollo federation to target. By default, the latest supported version is
targeted, but you can call this to pick an earlier version, which may be necessary if your
organization is on an older version of Apollo federation.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Set the Apollo Federation Version</p>
</div></h5>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../../ElasticGraph.html" title="ElasticGraph (module)">ElasticGraph</a></span></span><span class='period'>.</span><span class='id identifier rubyid_define_schema'><span class='object_link'><a href="../../../ElasticGraph.html#define_schema-class_method" title="ElasticGraph.define_schema (method)">define_schema</a></span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_schema'>schema</span><span class='op'>|</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_target_apollo_federation_version'>target_apollo_federation_version</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2.6</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>version</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>version number</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104
105
106
107
108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'elasticgraph-apollo/lib/elastic_graph/apollo/schema_definition/api_extension.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_target_apollo_federation_version'>target_apollo_federation_version</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
  <span class='comment'># Allow the version to have the `v` prefix, but don&#39;t require it.
</span>  <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_delete_prefix'>delete_prefix</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>v</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_apollo_directive_definitions'>apollo_directive_definitions</span> <span class='op'>=</span> <span class='const'>DIRECTIVE_DEFINITIONS_BY_FEDERATION_VERSION</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_supported_version_descriptions'>supported_version_descriptions</span> <span class='op'>=</span> <span class='const'>DIRECTIVE_DEFINITIONS_BY_FEDERATION_VERSION</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_version_number'>version_number</span><span class='op'>|</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>v</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version_number'>version_number</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Errors</span><span class='op'>::</span><span class='const'>SchemaError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>elasticgraph-apollo v</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../../../ElasticGraph.html" title="ElasticGraph (module)">ElasticGraph</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../ElasticGraph.html#VERSION-constant" title="ElasticGraph::VERSION (constant)">VERSION</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support Apollo federation v</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_content'>. </span><span class='tstring_end'>&quot;</span></span> \
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pick one of the supported versions (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_supported_version_descriptions'>supported_version_descriptions</span><span class='embexpr_end'>}</span><span class='tstring_content'>) instead.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Nov 11 21:33:35 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.3.6).
</div>

    </div>
  </body>
</html>